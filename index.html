<!DOCTYPE html>
<html lang="vi">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>üíå L·ªùi t·ªè t√¨nh</title>
  <meta name="description" content="Trang t·ªè t√¨nh 1 file duy nh·∫•t, ƒë·∫πp, d·ªÖ tu·ª≥ bi·∫øn." />
  <style>
    :root{
      --bg1:#ffdde1; /* h·ªìng nh·∫°t */
      --bg2:#ee9ca7; /* h·ªìng ƒë·∫≠m */
      --card:#ffffffcc; /* k√≠nh m·ªù */
      --text:#2b2b2b;
      --accent:#ff4d6d;
      --accent-2:#ff8fab;
    }
    *{box-sizing:border-box}
    html,body{height:100%;margin:0;font-family: ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial, "Apple Color Emoji", "Segoe UI Emoji"}
    body{
      background: linear-gradient(135deg,var(--bg1),var(--bg2));
      overflow-x:hidden;
      color:var(--text);
    }
    /* Floating hearts background */
    .hearts{position:fixed;inset:0;pointer-events:none;z-index:0;overflow:hidden}
    .heart{position:absolute;bottom:-60px;font-size:22px;opacity:.8;animation:float 10s linear infinite}
    @keyframes float{0%{transform:translateY(0) translateX(0) rotate(0)} 100%{transform:translateY(-120vh) translateX(var(--x,0)) rotate(360deg);opacity:0}}

    /* Center card */
    .wrap{position:relative;min-height:100%;display:grid;place-items:center;padding:40px}
    .card{position:relative;z-index:1;max-width:720px;width:100%;background:var(--card);backdrop-filter: blur(8px); border-radius:24px; padding:28px 24px; box-shadow:0 20px 50px rgba(0,0,0,.15); overflow:hidden}

    /* Heading with typewriter */
    h1{margin:0 0 12px;font-size:36px;line-height:1.2;text-align:center}
    .type{display:inline-block;border-right:2px solid var(--accent);white-space:nowrap;overflow:hidden}
    .subtitle{margin:6px 0 18px;text-align:center;opacity:.85}

    /* Photo (optional) */
    .photo{width:100%;max-height:320px;object-fit:cover;border-radius:18px;box-shadow:0 10px 30px rgba(0,0,0,.12);}
    .photo-wrap{margin:12px auto 16px;max-width:560px}

    /* Message */
    .msg{font-size:18px;line-height:1.7;margin:6px auto 18px;max-width:620px;text-align:center}

    /* Buttons */
    .actions{display:flex;gap:12px;justify-content:center;flex-wrap:wrap;margin-top:12px}
    .btn{appearance:none;border:none;border-radius:999px;padding:14px 22px;font-weight:700;cursor:pointer;transition:.2s transform, .2s box-shadow;}
    .btn-primary{background:var(--accent);color:white;box-shadow:0 10px 20px rgba(255,77,109,.35)}
    .btn-primary:hover{transform:translateY(-1px);box-shadow:0 14px 24px rgba(255,77,109,.45)}
    .btn-ghost{background:white;color:var(--accent);border:2px solid var(--accent);}
    .btn-ghost:hover{transform:translateY(-1px)}

    /* Footer note */
    .note{margin-top:16px;text-align:center;font-size:14px;opacity:.7}

    /* Modal */
    .modal{position:fixed;inset:0;display:none;align-items:center;justify-content:center;background:rgba(0,0,0,.35);padding:20px;z-index:10}
    .modal.active{display:flex}
    .modal-card{background:white;border-radius:20px;max-width:560px;width:100%;padding:24px;text-align:center;box-shadow:0 14px 50px rgba(0,0,0,.3)}
    .modal-title{font-size:28px;margin:0 0 8px;color:var(--accent)}
    .modal-msg{margin:0 0 16px}

    /* Canvas confetti */
    #confetti{position:fixed;inset:0;pointer-events:none;z-index:20}

    /* Mobile tweaks */
    @media (max-width:480px){
      h1{font-size:28px}
      .msg{font-size:16px}
    }
  </style>
</head>
<body>
  <canvas id="confetti"></canvas>
  <div class="hearts" id="hearts"></div>

  <div class="wrap">
    <div class="card">
      <h1>
        <span class="type" id="type">G·ª≠i <span id="target-name">Em</span>, m√¨nh n√≥i ƒëi·ªÅu n√†y nh√©...</span>
      </h1>
      <p class="subtitle">(M·ªôt chi·∫øc l·ªùi t·ªè t√¨nh nho nh·ªè üíñ)</p>

      <!-- ·∫¢nh tu·ª≥ ch·ªçn: ƒë·∫∑t ·∫£nh c·ªßa 2 b·∫°n v√†o c√πng th∆∞ m·ª•c v√† s·ª≠a src d∆∞·ªõi ƒë√¢y -->
      <div class="photo-wrap">
        <img class="photo" src="https://images.unsplash.com/photo-1518199266791-5375a83190b7?q=80&w=1600&auto=format&fit=crop" alt="K·ª∑ ni·ªám c·ªßa ch√∫ng ta" />
      </div>

      <p class="msg">
        T·ª´ ng√†y g·∫∑p <strong><span id="name-strong">em</span></strong>, m·ªçi th·ª© d∆∞·ªùng nh∆∞ r·ª±c r·ª° h∆°n. M·ªói l·∫ßn nh·∫Øn tin hay g·∫∑p nhau,
        tim m√¨nh l·∫°i ƒë·∫≠p nhanh m·ªôt ch√∫t. M√¨nh mu·ªën ƒë∆∞·ª£c ·ªü c·∫°nh, chƒÉm s√≥c v√† c√πng t·∫°o n√™n th·∫≠t nhi·ªÅu k·ª∑ ni·ªám ƒë·∫πp.
      </p>
      <p class="msg">
        V·∫≠y n√™n... <em>em l√†m ng∆∞·ªùi y√™u anh nh√©?</em> ü•∞
      </p>

      <div class="actions">
        <button class="btn btn-primary" id="yes">Em ƒë·ªìng √Ω üíò</button>
        <button class="btn btn-ghost" id="no">ƒê·ªÉ suy nghƒ© ƒë√£ üòÖ</button>
      </div>

      <div class="note">G·ª£i √Ω: nh·∫≠p t√™n trong URL nh∆∞ <code>?to=Lan</code> ƒë·ªÉ hi·ªán t√™n ‚ù§Ô∏è</div>
    </div>
  </div>

  <!-- Modal tr·∫£ l·ªùi Yes -->
  <div class="modal" id="modal">
    <div class="modal-card">
      <h2 class="modal-title">Yay! üíñ</h2>
      <p class="modal-msg">C·∫£m ∆°n em ƒë√£ ƒë·ªìng √Ω. T·ª´ h√¥m nay, m√¨nh s·∫Ω c√πng nhau vi·∫øt ti·∫øp c√¢u chuy·ªán th·∫≠t ƒë·∫πp nh√©!</p>
      <button class="btn btn-primary" id="close-modal">√îm m·ªôt c√°i ü§ó</button>
    </div>
  </div>

  <script>
    // === Typewriter effect ===
    (function typewriter(){
      const el = document.getElementById('type');
      const text = el.textContent;
      el.textContent = '';
      let i = 0;
      const tick = () => {
        if (i <= text.length) { el.textContent = text.slice(0,i) + (i % 2 ? '' : '\u00a0'); i++; setTimeout(tick, 45); }
      };
      tick();
    })();

    // === Query param ?to=Name to personalize ===
    (function personalize(){
      const params = new URLSearchParams(location.search);
      const to = params.get('to');
      if (to) {
        document.getElementById('target-name').textContent = to;
        document.getElementById('name-strong').textContent = to.toLowerCase() === 'anh' ? 'em' : to;
      }
    })();

    // === Floating hearts generator ===
    (function hearts(){
      const container = document.getElementById('hearts');
      const symbols = ['‚ù§','üíñ','üíó','üíì','üíò'];
      function spawn(){
        const h = document.createElement('div');
        h.className = 'heart';
        h.textContent = symbols[Math.floor(Math.random()*symbols.length)];
        h.style.left = Math.random()*100 + 'vw';
        h.style.setProperty('--x', (Math.random()*100 - 50) + 'px');
        h.style.animationDuration = (8 + Math.random()*6) + 's';
        h.style.opacity = (0.6 + Math.random()*0.4);
        container.appendChild(h);
        setTimeout(()=>h.remove(), 12000);
      }
      for (let i=0;i<20;i++) setTimeout(spawn, i*300);
      setInterval(spawn, 1200);
    })();

    // === Playful buttons ===
    (function buttons(){
      const yes = document.getElementById('yes');
      const no = document.getElementById('no');
      const modal = document.getElementById('modal');
      const close = document.getElementById('close-modal');

      yes.addEventListener('click', () => { celebrate(); modal.classList.add('active'); });
      close.addEventListener('click', () => modal.classList.remove('active'));

      // "No" tries to escape the cursor
      let dodgeCount = 0;
      no.addEventListener('mouseenter', () => {
        dodgeCount++;
        const dx = (Math.random()*60 - 30);
        const dy = (Math.random()*60 - 30);
        no.style.transform = `translate(${dx}px, ${dy}px)`;
        if (dodgeCount > 4) no.textContent = 'Kh√≥ qu√°‚Ä¶ ƒë·ªìng √Ω ƒëi üòú';
      });
    })();

    // === Simple confetti on canvas ===
    function celebrate(){
      const c = document.getElementById('confetti');
      const ctx = c.getContext('2d');
      const W = c.width = innerWidth; const H = c.height = innerHeight;
      const N = 200, parts = [];
      for (let i=0;i<N;i++){
        parts.push({
          x: Math.random()*W,
          y: -10 - Math.random()*H*0.5,
          r: 2 + Math.random()*4,
          vx: -2 + Math.random()*4,
          vy: 2 + Math.random()*3,
          a: Math.random()*Math.PI*2,
          s: 0.02 + Math.random()*0.04,
        });
      }
      let t=0, stopAt = Date.now()+3000;
      (function loop(){
        ctx.clearRect(0,0,W,H);
        ctx.save();
        for(const p of parts){
          p.x += p.vx; p.y += p.vy; p.a += p.s;
          if (p.y > H+20) { p.y = -10; }
          ctx.save();
          ctx.translate(p.x, p.y);
          ctx.rotate(p.a);
          // draw small rectangle like confetti with random hues
          ctx.fillStyle = `hsl(${(p.x+p.y+t)%360},90%,60%)`;
          ctx.fillRect(-p.r, -p.r, p.r*2, p.r*2.8);
          ctx.restore();
        }
        ctx.restore();
        t+=1;
        if (Date.now() < stopAt) requestAnimationFrame(loop); else ctx.clearRect(0,0,W,H);
      })();
      // Resize once
      addEventListener('resize', () => { c.width = innerWidth; c.height = innerHeight; }, {once:true});
    }
  </script>
</body>
</html>
